//
//  CourseSchedule.hpp
//  Demo
//
//  Created by Zhuo,Chuncai on 2022/3/6.
//  Copyright Â© 2022 Zhuo,Chuncai. All rights reserved.
//

#ifndef CourseSchedule_hpp
#define CourseSchedule_hpp

#include <stdio.h>
#include "PublicCommon.h"

/* testCase
 100
 [[1,0],[2,0],[2,1],[3,1],[3,2],[4,2],[4,3],[5,3],[5,4],[6,4],[6,5],[7,5],[7,6],[8,6],[8,7],[9,7],[9,8],[10,8],[10,9],[11,9],[11,10],[12,10],[12,11],[13,11],[13,12],[14,12],[14,13],[15,13],[15,14],[16,14],[16,15],[17,15],[17,16],[18,16],[18,17],[19,17],[19,18],[20,18],[20,19],[21,19],[21,20],[22,20],[22,21],[23,21],[23,22],[24,22],[24,23],[25,23],[25,24],[26,24],[26,25],[27,25],[27,26],[28,26],[28,27],[29,27],[29,28],[30,28],[30,29],[31,29],[31,30],[32,30],[32,31],[33,31],[33,32],[34,32],[34,33],[35,33],[35,34],[36,34],[36,35],[37,35],[37,36],[38,36],[38,37],[39,37],[39,38],[40,38],[40,39],[41,39],[41,40],[42,40],[42,41],[43,41],[43,42],[44,42],[44,43],[45,43],[45,44],[46,44],[46,45],[47,45],[47,46],[48,46],[48,47],[49,47],[49,48],[50,48],[50,49],[51,49],[51,50],[52,50],[52,51],[53,51],[53,52],[54,52],[54,53],[55,53],[55,54],[56,54],[56,55],[57,55],[57,56],[58,56],[58,57],[59,57],[59,58],[60,58],[60,59],[61,59],[61,60],[62,60],[62,61],[63,61],[63,62],[64,62],[64,63],[65,63],[65,64],[66,64],[66,65],[67,65],[67,66],[68,66],[68,67],[69,67],[69,68],[70,68],[70,69],[71,69],[71,70],[72,70],[72,71],[73,71],[73,72],[74,72],[74,73],[75,73],[75,74],[76,74],[76,75],[77,75],[77,76],[78,76],[78,77],[79,77],[79,78],[80,78],[80,79],[81,79],[81,80],[82,80],[82,81],[83,81],[83,82],[84,82],[84,83],[85,83],[85,84],[86,84],[86,85],[87,85],[87,86],[88,86],[88,87],[89,87],[89,88],[90,88],[90,89],[91,89],[91,90],[92,90],[92,91],[93,91],[93,92],[94,92],[94,93],[95,93],[95,94],[96,94],[96,95],[97,95],[97,96],[98,96],[98,97],[99,97]]
 
 700
 [[78,355],[498,138],[462,346],[57,190],[411,532],[693,323],[96,76],[299,41],[618,264],[472,467],[644,127],[175,3],[296,673],[551,554],[206,128],[317,226],[142,150],[637,319],[436,433],[421,518],[189,471],[292,179],[22,206],[202,166],[396,583],[102,601],[525,445],[33,368],[612,210],[14,157],[303,37],[24,283],[582,391],[477,522],[495,552],[381,226],[310,111],[109,400],[456,589],[62,366],[565,415],[493,129],[124,250],[259,461],[282,226],[107,36],[405,178],[198,485],[575,39],[285,393],[353,674],[444,590],[67,0],[573,445],[642,339],[548,643],[652,194],[455,648],[327,253],[540,569],[372,233],[325,84],[34,648],[310,681],[571,534],[301,577],[147,41],[410,594],[407,158],[256,417],[125,566],[30,530],[122,188],[90,21],[610,289],[105,616],[179,570],[119,548],[652,589],[304,603],[352,156],[207,508],[202,15],[116,326],[511,0],[385,510],[635,623],[358,20],[470,577],[279,142],[400,241],[195,561],[277,611],[399,456],[623,431],[406,576],[184,322],[180,145],[146,101],[475,398],[283,498],[417,71],[446,688],[683,563],[677,484],[92,425],[407,585],[516,197],[559,57],[372,342],[244,618],[150,451],[126,224],[626,240],[224,211],[2,132],[482,174],[630,397],[111,457],[338,629],[572,87],[399,513],[266,51],[239,538],[437,682],[555,667],[360,229],[413,235],[302,250],[56,7],[100,515],[264,123],[545,386],[268,367],[638,199],[432,69],[71,467],[424,584],[491,134],[69,543],[223,355],[596,315],[217,619],[550,371],[482,120],[639,304],[575,89],[116,252],[622,591],[214,381],[467,73],[253,227],[86,3],[384,543],[73,610],[169,87],[11,181],[327,570],[424,124],[139,32],[636,324],[141,641],[563,12],[654,384],[307,569],[536,27],[245,176],[423,575],[640,682],[544,207],[513,653],[241,180],[561,673],[280,504],[207,144],[613,574],[158,458],[484,685],[604,416],[533,254],[73,392],[501,653],[517,624],[299,311],[66,116],[654,103],[584,362],[110,483],[587,297],[447,665],[472,484],[561,699],[374,174],[14,105],[585,250],[78,186],[454,423],[615,109],[17,635],[643,124],[347,370],[601,329],[125,117],[36,130],[53,281],[84,279],[537,470],[391,158],[5,247],[421,637],[494,529],[192,370],[489,85],[508,407],[605,185],[325,102],[542,353],[215,509],[87,55],[40,502],[569,167],[268,432],[299,113],[330,490],[553,449],[679,549],[456,420],[82,276],[673,230],[220,68],[85,679],[432,449],[628,395],[692,659],[652,510],[5,264],[431,353],[31,661],[289,205],[575,81],[278,579],[336,383],[244,223],[139,560],[687,471],[516,619],[20,647],[292,299],[687,590],[549,653],[185,579],[92,334],[475,178],[429,290],[248,226],[154,636],[269,455],[40,179],[556,21],[193,691],[433,292],[119,200],[173,287],[515,436],[17,65],[72,159],[347,305],[264,318],[231,663],[66,517],[46,633],[512,74],[602,647],[611,277],[656,187],[390,595],[502,85],[461,224],[469,36],[598,267],[25,452],[228,388],[588,487],[663,283],[176,359],[437,475],[416,253],[349,277],[685,421],[195,562],[698,457],[167,590],[608,199],[460,362],[304,163],[245,537],[425,280],[86,551],[31,76],[17,680],[430,100],[560,379],[666,163],[316,266],[76,459],[534,174],[595,10],[302,592],[527,80],[389,600],[196,61],[247,47],[532,661],[45,127],[526,228],[672,500],[367,185],[204,88],[676,243],[642,123],[226,652],[272,569],[351,489],[411,67],[618,388],[465,695],[235,632],[387,626],[560,443],[444,611],[681,434],[109,207],[243,481],[135,611],[450,2],[391,535],[537,211],[513,282],[357,405],[9,242],[456,360],[636,614],[404,572],[418,293],[277,319],[375,294],[422,612],[485,585],[181,100],[198,433],[664,37],[673,221],[525,524],[124,70],[468,122],[277,461],[502,234],[101,266],[226,616],[27,382],[478,675],[610,617],[143,254],[552,472],[49,622],[70,693],[188,398],[569,505],[82,426],[670,106],[34,186],[665,277],[659,178],[477,325],[660,139],[540,680],[460,552],[154,98],[94,471],[238,245],[36,50],[290,662],[485,91],[600,536],[242,267],[65,79],[87,232],[642,107],[81,627],[395,404],[247,394],[60,458],[697,376],[303,153],[438,318],[386,221],[115,302],[653,292],[192,29],[488,320],[497,588],[272,361],[121,317],[577,136],[168,261],[699,444],[198,390],[631,138],[504,384],[455,27],[410,298],[656,67],[177,651],[299,629],[490,420],[156,111],[504,472],[362,679],[174,578],[174,596],[429,654],[638,399],[450,62],[317,186],[165,228],[502,251],[247,681],[138,193],[82,207],[413,142],[358,626],[671,385],[590,626],[422,92],[630,94],[418,114],[317,301],[521,216],[93,284],[77,226],[173,492],[674,153],[453,146],[426,513],[173,203],[154,630],[599,583],[23,698],[465,534],[622,574],[461,3],[377,244],[345,522],[431,469],[499,48],[90,643],[141,461],[548,349],[166,215],[91,191],[127,477],[649,432],[576,238],[623,47],[390,178],[571,315],[394,184],[133,523],[548,475],[402,150],[265,546],[53,595],[418,7],[328,371],[581,261],[10,6],[255,420],[143,31],[644,50],[64,38],[372,304],[282,292],[12,110],[152,311],[402,385],[551,152],[682,206],[617,239],[176,304],[190,96],[301,132],[638,156],[220,242],[128,227],[446,306],[678,188],[329,513],[343,268],[384,212],[218,391],[210,231],[157,588],[297,217],[101,489],[475,581],[685,598],[309,82],[383,547],[65,259],[247,137],[109,315],[203,551],[30,475],[629,42],[78,17],[128,175],[149,664],[104,533],[154,623],[542,283],[580,229],[436,222],[112,386],[84,273],[324,466],[636,473],[106,282],[246,53],[671,299],[144,427],[176,242],[213,386],[180,673],[569,459],[549,571],[528,642],[696,437],[110,65],[626,399],[14,1],[640,404],[555,306],[200,340],[23,176],[601,445],[214,374],[229,683],[299,156],[38,73],[411,696],[584,89],[145,441],[170,178],[97,306],[242,129],[347,537],[593,188],[91,309],[673,136],[101,18],[206,323],[265,180],[599,333],[92,121],[315,392],[513,659],[195,435],[21,263],[623,294],[99,192],[24,61],[169,325],[161,162],[251,614],[90,122],[512,638],[553,644],[233,409],[113,624],[293,566],[57,222],[687,3],[242,219],[194,101],[289,265],[312,391],[265,358],[111,339],[20,622],[100,31],[3,521],[114,272],[631,0],[620,329],[536,135],[282,85],[688,515],[6,411],[565,122],[226,241],[169,395],[398,197],[437,25],[532,155],[144,504],[202,350],[503,543],[388,521],[473,407],[575,196],[486,251],[571,322],[260,160],[486,175],[347,629],[676,396],[269,201],[12,475],[7,266],[218,521],[125,451],[212,580],[136,521],[357,220],[323,40],[19,8],[424,152],[31,500],[357,570],[401,241],[235,211],[658,168],[92,122],[599,507],[232,665],[237,417],[624,448],[620,612],[547,361],[648,61],[70,353],[381,3],[600,206],[147,457],[432,96],[348,463],[423,339],[134,131],[36,696],[136,253],[137,375],[358,344],[264,642],[454,278],[308,187],[674,155],[51,476],[571,418],[22,17],[665,87],[445,557],[278,531],[188,690],[80,514],[14,230],[134,278],[367,584],[599,264],[579,638],[86,7],[563,2],[150,73],[685,237],[158,553],[171,593],[64,145],[417,525],[620,593],[666,137],[514,620],[559,357],[609,267],[282,415],[417,499],[107,112],[191,140],[26,458],[467,382],[663,19],[281,146],[363,515],[179,492],[20,164],[91,318],[604,335],[50,286],[228,374],[317,693],[430,280],[422,655],[448,255],[81,596],[430,326],[482,8],[373,151],[470,437],[287,124],[410,543],[186,209],[588,167],[34,363],[50,262],[515,548],[194,65],[590,617],[282,149],[283,27],[372,314],[425,685],[563,605],[435,438],[33,262],[159,657],[246,212],[133,177],[151,449],[294,45],[62,319],[145,267],[78,359],[281,70],[289,255],[605,513],[56,656],[422,519],[649,261],[605,403],[619,102],[597,362],[23,418],[666,633],[29,474],[20,261],[680,531],[645,316],[472,378],[643,410],[534,387],[580,627],[545,456],[456,694],[462,48],[693,47],[231,160],[608,674],[547,554],[287,316],[477,121],[170,104],[534,346],[484,367],[512,61],[117,103],[22,159],[305,544],[307,685],[96,196],[669,230],[200,55],[620,199],[323,267],[248,470],[521,421],[651,263],[17,512],[569,421],[547,174],[675,418],[286,531],[191,663],[623,175],[2,549],[350,588],[324,669],[30,434],[227,100],[662,140],[418,49],[21,24],[24,55],[375,608],[550,211],[304,316],[211,438],[583,256],[507,120],[434,669],[62,425],[191,0],[574,401],[287,204],[409,197],[339,9],[451,195],[185,561],[364,528],[383,149],[479,284],[411,505],[102,82],[318,637],[602,639],[190,309],[538,0],[182,62],[663,630],[383,528],[551,647],[309,415],[567,437],[523,74],[240,649],[570,623],[458,528],[227,182],[208,5],[596,359],[344,366],[414,13],[517,664],[688,258],[279,177],[442,568],[659,284],[560,424],[487,389],[309,68],[420,285],[292,92],[243,424],[655,678],[699,80],[690,549],[262,361],[629,315],[434,135],[323,289],[696,587],[431,695],[201,123],[445,91],[526,71],[506,588],[324,677],[404,47],[61,338],[42,606],[91,489],[591,347],[479,364],[478,194],[649,361],[251,627],[312,142],[53,293],[98,378],[361,289],[553,4],[470,475],[336,400],[364,8],[403,194],[337,119],[622,26],[393,309],[541,221],[617,511],[289,482],[359,581],[311,155],[93,277],[601,34],[280,564],[57,499],[424,59],[313,350],[78,194],[453,496],[199,667],[429,431],[310,474],[332,287],[613,3],[515,637],[113,106],[617,404],[625,114],[190,376],[232,306],[568,10],[594,639],[611,399],[566,414],[254,76],[136,310],[250,644],[517,330],[530,288],[595,38],[321,583],[600,383],[244,570],[39,47],[329,31],[585,158],[547,527],[580,529],[647,243],[340,56],[150,96],[49,605],[258,164],[295,155],[473,310],[302,47],[191,302],[533,310],[462,78],[123,161],[380,358],[564,218],[601,13],[158,292],[310,0],[49,240],[584,404],[262,184],[7,64],[207,68],[430,526],[140,338],[252,593],[394,274],[467,393],[697,676],[42,283],[284,418],[460,245],[409,43],[12,576],[53,314],[492,497],[426,618],[488,264],[174,649],[496,215],[103,391],[579,594],[339,303],[537,51],[137,527],[200,105],[467,9],[79,85],[299,557],[611,244],[206,97],[527,573],[252,586],[410,6],[53,465],[610,321],[405,214],[96,25],[408,495],[554,18],[68,24],[238,72],[22,538],[477,568],[441,310],[494,645],[393,254],[4,632],[68,446],[278,317],[170,490],[689,159],[258,221],[340,66],[55,356],[330,443],[437,192],[674,201],[405,344],[100,618],[87,195],[129,126],[12,432],[273,465],[416,647],[434,509],[415,538],[291,680],[222,623],[142,421],[453,232],[250,186],[365,30],[451,637],[684,437],[86,507],[231,5],[668,235],[349,541],[444,90],[468,617],[74,624],[377,571],[671,290],[606,588],[232,430],[353,49],[44,658],[224,660],[49,86],[27,236],[636,444],[49,559],[121,640],[315,214],[146,522],[385,52],[162,552],[309,37],[231,559],[281,691],[266,173],[532,512],[292,347],[476,524],[265,454],[646,625],[629,618],[695,545],[363,291],[354,277],[154,384],[545,254],[184,557],[301,629],[275,10],[301,486],[141,139],[65,299],[285,503],[629,366],[34,360],[194,529],[245,82],[17,687],[283,350],[341,260],[398,650],[85,434],[551,170],[322,514],[264,458],[697,507],[97,269],[646,141],[395,578],[581,338],[569,388],[340,537],[241,414],[383,457],[489,160],[346,273],[183,308],[5,14],[479,563],[605,342],[370,178],[615,648],[548,377],[630,405],[697,389],[639,470],[212,390],[34,355],[635,334],[3,175],[465,524],[132,435],[466,457],[433,469],[178,686],[38,699],[367,539],[210,130],[670,534],[374,182],[35,193],[249,145],[578,334],[121,343],[287,14],[219,446],[319,236],[98,632],[646,599],[564,509],[402,120],[229,649],[416,167],[223,568],[29,609],[684,138],[540,536],[178,324],[184,244],[695,243],[143,295],[517,401],[58,114],[521,413],[458,135],[372,72],[253,554],[517,111],[663,388],[92,265],[49,617],[45,275],[352,158],[176,544],[81,591],[248,429],[14,56],[52,61],[348,4],[238,565],[612,395],[225,4],[639,215],[556,342],[525,606],[215,309],[239,617],[53,206],[409,342],[615,4],[111,517],[653,431],[550,153],[247,495],[51,548],[634,529],[179,348],[204,694],[449,5],[214,371],[588,56],[258,94],[545,214],[683,108],[82,330],[292,209],[2,17],[211,580],[428,330],[254,88],[559,86],[413,43],[518,685],[546,381],[223,244],[165,159],[441,539],[195,526],[70,417],[156,308],[492,20],[237,133],[292,450],[212,545],[493,114],[14,334],[490,12],[524,426],[634,51],[447,406],[50,159],[7,641],[430,97],[281,371],[307,538],[175,181],[540,430],[62,235],[553,645],[464,626],[5,567],[399,451],[605,313],[185,519],[605,308],[583,475],[130,490],[96,650],[577,300],[151,191],[684,387],[280,413],[558,523],[434,589],[201,12],[469,591],[648,329],[350,90],[384,613],[361,238],[334,447],[503,510],[188,46],[265,607],[357,36],[647,416],[403,181],[395,631],[135,104],[382,303],[573,60],[133,82],[118,437],[100,502],[699,535],[276,348],[183,587],[538,454],[438,612],[56,48],[300,52],[172,681],[629,80],[262,197],[291,387],[432,461],[639,349],[426,310],[418,513],[586,96],[533,86],[293,620],[273,430],[577,546],[279,252],[144,303],[577,9],[203,391],[429,374],[281,73],[641,305],[238,531],[380,383],[12,434],[61,370],[597,50],[154,225],[398,331],[205,192],[258,110],[472,161],[369,491],[119,237],[211,305],[246,546],[430,539],[440,631],[258,394],[308,42],[414,175],[698,438],[683,94],[441,420],[181,58],[518,562],[501,400],[461,596],[368,665],[188,452],[699,283],[132,528],[349,238],[314,92],[257,236]]
 
 500
 [[481,475],[196,63],[438,33],[212,328],[268,20],[226,288],[436,487],[199,494],[421,279],[369,14],[92,91],[183,174],[271,15],[4,435],[435,47],[217,460],[216,319],[468,125],[115,1],[435,383],[192,136],[86,103],[336,342],[5,301],[255,253],[185,37],[323,168],[417,241],[151,208],[347,53],[180,329],[198,452],[31,419],[406,74],[324,105],[164,494],[281,316],[139,318],[269,214],[21,269],[271,234],[142,50],[304,375],[285,438],[120,251],[275,423],[447,91],[420,443],[163,476],[436,423],[76,487],[3,443],[262,309],[398,194],[26,468],[413,241],[187,472],[279,58],[29,48],[173,250],[423,499],[456,242],[34,102],[42,376],[286,159],[147,55],[208,449],[352,86],[147,228],[111,306],[108,238],[297,290],[199,472],[263,451],[383,116],[441,465],[490,396],[39,342],[16,441],[175,405],[139,70],[377,370],[244,276],[379,188],[175,188],[3,165],[291,485],[162,293],[336,140],[236,61],[297,424],[413,403],[75,161],[148,232],[9,313],[260,186],[390,116],[282,350],[239,357],[33,285],[231,24],[342,82],[58,210],[423,356],[85,97],[197,346],[157,467],[210,364],[276,283],[170,54],[113,332],[48,270],[43,166],[416,42],[261,341],[373,76],[32,128],[382,302],[89,376],[414,363],[346,474],[245,460],[62,440],[138,458],[427,419],[412,128],[400,308],[229,286],[134,153],[332,488],[67,343],[401,202],[130,370],[345,242],[211,169],[128,346],[372,128],[405,139],[181,344],[65,52],[257,40],[355,133],[188,416],[128,362],[30,365],[329,88],[261,32],[197,171],[387,463],[316,360],[364,250],[167,129],[25,318],[429,87],[274,272],[426,92],[24,127],[123,245],[238,164],[124,275],[98,48],[275,414],[217,409],[80,326],[486,180],[223,182],[344,236],[147,153],[20,63],[177,51],[430,57],[447,108],[339,265],[455,6],[249,300],[367,279],[368,309],[460,175],[453,366],[352,129],[433,127],[319,78],[369,114],[156,400],[80,146],[190,194],[148,9],[230,107],[236,449],[417,287],[486,63],[92,301],[77,332],[101,111],[33,373],[189,265],[458,209],[318,219],[179,451],[30,259],[7,252],[45,403],[18,261],[7,413],[387,211],[230,80],[194,26],[61,200],[336,483],[385,410],[196,260],[487,16],[193,494],[490,410],[217,499],[387,119],[30,174],[47,165],[409,352],[420,189],[294,242],[332,335],[341,13],[6,121],[479,282],[491,373],[60,269],[476,29],[239,59],[365,408],[361,205],[427,329],[185,30],[339,424],[6,190],[50,274],[483,98],[304,233],[214,294],[230,29],[441,401],[46,217],[339,446],[54,183],[427,378],[9,319],[446,337],[120,219],[280,371],[390,495],[44,378],[108,95],[209,126],[234,156],[206,367],[178,273],[237,49],[374,155],[201,176],[208,122],[178,131],[12,432],[152,461],[309,386],[79,114],[337,271],[226,200],[177,117],[259,41],[427,423],[75,449],[430,427],[256,320],[497,309],[87,324],[383,311],[233,464],[97,161],[484,38],[397,200],[312,258],[252,207],[478,169],[207,441],[210,28],[179,305],[250,85],[181,491],[250,426],[441,43],[484,115],[274,316],[432,55],[424,21],[361,252],[432,95],[423,174],[95,316],[65,15],[87,305],[255,109],[151,282],[391,85],[63,114],[411,279],[42,238],[160,461],[77,115],[211,287],[433,427],[230,179],[146,183],[255,128],[125,165],[126,383],[483,490],[22,481],[90,232],[435,389],[387,246],[53,329],[131,7],[3,483],[281,191],[335,401],[464,482],[277,289],[418,489],[289,210],[83,199],[54,131],[439,206],[462,182],[107,147],[36,236],[72,267],[59,471],[86,91],[35,150],[331,420],[414,151],[467,266],[440,141],[410,349],[347,179],[475,241],[477,108],[138,237],[172,68],[69,97],[266,40],[43,466],[118,406],[238,303],[92,216],[157,13],[127,337],[159,162],[343,344],[153,311],[114,255],[22,203],[236,46],[360,235],[57,358],[311,73],[450,444],[134,283],[444,60],[55,248],[372,343],[193,286],[20,458],[78,390],[360,477],[355,164],[465,212],[191,15],[374,241],[75,118],[115,374],[359,361],[153,479],[83,53],[377,406],[21,304],[348,176],[408,52],[366,25],[375,80],[104,98],[84,428],[251,423],[437,29],[197,258],[213,488],[386,114],[204,375],[148,367],[129,363],[419,369],[176,113],[359,175],[160,303],[341,224],[352,41],[414,6],[135,214],[369,240],[48,361],[88,427],[311,305],[441,147],[333,148],[494,73],[6,82],[49,280],[423,471],[262,362],[222,316],[199,414],[370,84],[122,403],[9,315],[323,266],[270,338],[460,72],[171,335],[28,342],[198,402],[367,9],[22,307],[13,34],[363,446],[297,404],[73,60],[95,53],[252,166],[216,414],[384,270],[464,50],[0,185],[478,19],[172,457],[2,479],[290,409],[138,369],[262,175],[93,368],[326,59],[13,125],[360,260],[333,110],[21,95],[323,134],[65,432],[33,411],[490,252],[389,169],[2,45],[18,248],[374,452],[457,56],[212,33],[428,485],[229,323],[36,235],[324,276],[41,382],[451,400],[390,473],[487,33],[64,414],[271,461],[149,384],[360,31],[393,119],[294,235],[447,204],[450,499],[308,345],[44,295],[111,491],[125,49],[293,473],[182,3],[324,358],[302,455],[274,188],[297,387],[12,278],[348,86],[425,5],[163,463],[219,354],[481,380],[1,31],[43,80],[339,159],[452,303],[367,182],[162,456],[420,99],[164,354],[214,84],[445,272],[16,14],[90,236],[483,180],[187,474],[312,53],[478,22],[185,376],[342,132],[219,35],[460,92],[151,350],[146,459],[469,287],[332,361],[179,145],[90,438],[11,417],[361,329],[173,423],[376,341],[456,327],[74,261],[261,402],[446,418],[62,339],[333,462],[92,32],[419,451],[269,452],[86,247],[441,6],[178,219],[175,122],[474,176],[336,10],[400,483],[185,334],[343,175],[207,261],[77,157],[236,325],[416,234],[304,359],[136,165],[411,129],[272,230],[482,416],[51,245],[105,80],[243,50],[76,390],[420,261],[261,433],[218,448],[308,469],[272,52],[37,384],[7,70],[292,195],[312,57],[311,142],[97,431],[386,294],[316,320],[465,42],[440,433],[91,134],[179,302],[365,115],[247,67],[139,149],[230,232],[384,1],[330,450],[41,144],[191,192],[54,271],[6,456],[481,443],[66,219],[346,301],[168,226],[269,353],[312,318],[104,467],[198,399],[377,398],[226,197],[440,164],[146,177],[292,494],[494,360],[64,464],[314,349],[254,25],[100,293],[20,274],[486,444],[17,173],[143,404],[338,203],[179,126],[135,84],[389,398],[404,480],[173,228],[245,466],[98,194],[37,116],[328,111],[150,218],[31,237],[488,225],[151,397],[40,269],[242,136],[420,469],[378,61],[34,157],[268,485],[175,442],[460,437],[119,237],[410,174],[348,446],[334,282],[363,73],[205,185],[66,218],[97,159],[407,363],[288,269],[348,105],[315,272],[280,492],[175,483],[194,316],[33,81],[47,402],[480,248],[444,74],[127,373],[142,309],[114,336],[384,213],[14,102],[228,83],[425,113],[427,42],[228,286],[333,205],[238,371],[3,334],[415,298],[396,482],[16,311],[77,269],[295,269],[432,322],[200,353],[360,388],[17,266],[370,350],[316,120],[146,186],[378,363],[186,224],[45,196],[401,434],[92,296],[82,120],[90,216],[263,352],[479,66],[13,185],[313,275],[437,469],[391,59],[214,74],[72,372],[383,27],[258,235],[486,460],[137,78],[285,89],[293,238],[117,411],[91,51],[137,318],[409,345],[10,224],[407,274],[161,440],[351,100]]
 
 
 
 */
namespace CourseSchedule {

//MARK: - DFS
class Solution {
public:
    bool isValid = true;
    vector<vector<int>> edge;
    vector<int> visited;

    void dfs(int u) {
        visited[u] = 1;
        for (int v: edge[u]) {
            if (visited[v] == 0) {
                dfs(v);
                if (!isValid) {
                    return;
                }
            } else if (visited[v] == 1) {
                isValid = false;
                return;
            }
        }
        if (!isValid) {
            return;
        }
        visited[u] = 2; //ä»¥uä¸ºèµ·å§ç¹çéå ç»æï¼ä¸å­å¨ç¯ï¼æ´æ¹visitedç¶æ
    }

    bool canFinish(int numCourses, vector<vector<int>>& a) {
        edge.resize(numCourses);
        visited.resize(numCourses);
        for (const auto &info : a) {
            edge[info[1]].push_back(info[0]);
        }

        for (int i = 0; i < numCourses && isValid; i++) {
            if (!visited[i]) {
                dfs(i);
            }
        }
        return isValid;
    }
};


//class Solution {
//    int V;    // No. of vertices
//    list<int> *adj;    // Pointer to an array containing adjacency lists
//    bool isCyclicUtil(int v, bool visited[], bool *recStack)
//    {
//        if(visited[v] == false)
//        {
//            // Mark the current node as visited and part of recursion stack
//            visited[v] = true;
//            recStack[v] = true;
//
//            // Recur for all the vertices adjacent to this vertex
//            list<int>::iterator i;
//            for(i = adj[v].begin(); i != adj[v].end(); ++i)
//            {
//                if ( !visited[*i] && isCyclicUtil(*i, visited, recStack) )
//                    return true;
//                else if (recStack[*i])
//                    return true;
//            }
//
//        }
//        recStack[v] = false;  // remove the vertex from recursion stack
//        return false;
//    }
//
//public:
//    bool canFinish(int numCourses, vector<vector<int> >& prerequisites) {
//        V = numCourses;
//        adj = new list<int>[V];
//        int totalCnt = (int)prerequisites.size();
//        // è¿ééåvectorï¼æ°éä¸ºvec.size()
//        for (int i = 0; i < totalCnt; i++) {
//            int latter = prerequisites[i][0];
//            int former = prerequisites[i][1];
//            addEdge(former, latter);
//        }
//        return !isCyclic();
//    }
//    void addEdge(int v, int w)
//    {
//        adj[v].push_back(w); // Add w to vâs list.
//    }
//
//    bool isCyclic()
//    {
//        // Mark all the vertices as not visited and not part of recursion
//        // stack
//        bool *visited = new bool[V];
//        bool *recStack = new bool[V];
//        for(int i = 0; i < V; i++)
//        {
//            visited[i] = false;
//            recStack[i] = false;
//        }
//
//        // Call the recursive helper function to detect cycle in different
//        // DFS trees
//        for(int i = 0; i < V; i++)
//            if ( !visited[i] && isCyclicUtil(i, visited, recStack))
//                return true;
//
//        return false;
//    }
//};


//MARK: - BFS
//BFS : indegree = 0
/*
 1. iterate over vertices to find indegree = 0
    push node into queue
    
 2.  iterate over the queue.
    when pop a node,  mark visited[i]=1, decrease the degree of adjacent node. iterate until queue is empty.
 count the visited number;
 */
class Solution1 {
//private:
    std::multimap<int, int> mMap;
    queue<int> mQ;
    bool visited[100001];
    int indegree[100001];
    int cycleExist = 0;
public:

    Solution() {
    }
    
    bool canFinish(int numCourses, vector<vector<int> >& prerequisites) {
        memset(visited, 1, sizeof(visited));
        memset(indegree, 0, sizeof(indegree));
        mMap.clear();

        int totalCnt = (int)prerequisites.size();
        // è¿ééåvectorï¼æ°éä¸ºvec.size()
        for (int i = 0; i < totalCnt; i++) {
            int latter = prerequisites[i][0];
            int former = prerequisites[i][1];
            visited[latter] = 0;
            visited[former] = 0;
            indegree[latter] ++;
            mMap.insert(std::make_pair(former,latter));
        }
        
        for (int i = 0; i < numCourses; i++) {
            if (indegree[i] == 0 && visited[i] == 0) {
                mQ.push(i);
            }
        }
        
        while (!mQ.empty()) {
            int i = mQ.front();
            if (visited[i] == 0) {
                auto ret = mMap.equal_range(i);
                for (std::multimap<int,int>::iterator it=ret.first; it!=ret.second; ++it) {
                    indegree[it->second]--;
                    if (indegree[it->second] == 0) {
                        mQ.push(it->second);
                    }
                }
                visited[i] = 1;
                mQ.pop();
            }
        }
        
        int visitedCourses = 0;
        for (int i = 0; i < numCourses; i++) {
            if (visited[i] == 1) {
                visitedCourses++;
            }
        }
        
        return visitedCourses >= numCourses;
    }
};

#endif /* CourseSchedule_hpp */
